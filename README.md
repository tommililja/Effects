Handle side effects and dependencies in F# using a free monad.
